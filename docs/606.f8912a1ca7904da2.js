"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[606],{2606:(f,m,c)=>{c.r(m),c.d(m,{CameraPreviewWeb:()=>v});var a=c(467),h=c(5083);class v extends h.E_{constructor(){super({name:"CameraPreview",platforms:["web"]})}start(e){var i=this;return(0,a.A)(function*(){return new Promise(function(){var s=(0,a.A)(function*(n,r){yield navigator.mediaDevices.getUserMedia({audio:!e.disableAudio,video:!0}).then(t=>{t.getTracks().forEach(u=>u.stop())}).catch(t=>{r(t)});const o=document.getElementById("video"),d=document.getElementById(e.parent);if(o)r({message:"camera already started"});else{const t=document.createElement("video");t.id="video",t.setAttribute("class",e.className||""),"rear"!==e.position&&t.setAttribute("style","-webkit-transform: scaleX(-1); transform: scaleX(-1);");const u=navigator.userAgent.toLowerCase();if(u.includes("safari")&&!u.includes("chrome")&&(t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true")),d.appendChild(t),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const p={video:{width:{ideal:e.width},height:{ideal:e.height}}};"rear"===e.position?(p.video.facingMode="environment",i.isBackCamera=!0):i.isBackCamera=!1,navigator.mediaDevices.getUserMedia(p).then(function(l){t.srcObject=l,t.play(),n({})},l=>{r(l)})}}});return function(n,r){return s.apply(this,arguments)}}())})()}startRecordVideo(){var e=this;return(0,a.A)(function*(){throw e.unimplemented("Not implemented on web.")})()}stopRecordVideo(){var e=this;return(0,a.A)(function*(){throw e.unimplemented("Not implemented on web.")})()}stop(){return(0,a.A)(function*(){const e=document.getElementById("video");if(e){e.pause();const s=e.srcObject.getTracks();for(let n=0;n<s.length;n++)s[n].stop();e.remove()}})()}capture(e){var i=this;return(0,a.A)(function*(){return new Promise((s,n)=>{const r=document.getElementById("video"),o=document.createElement("canvas"),d=o.getContext("2d");let t;o.width=r.videoWidth,o.height=r.videoHeight,i.isBackCamera||(d.translate(r.videoWidth,0),d.scale(-1,1)),d.drawImage(r,0,0,r.videoWidth,r.videoHeight),t=null!=e.quality?o.toDataURL("image/jpeg",e.quality/100).replace("data:image/jpeg;base64,",""):o.toDataURL("image/png").replace("data:image/png;base64,",""),s({value:t})})})()}captureSample(e){var i=this;return(0,a.A)(function*(){return i.capture(e)})()}getSupportedFlashModes(){return(0,a.A)(function*(){throw new Error("getSupportedFlashModes not supported under the web platform")})()}setFlashMode(e){return(0,a.A)(function*(){throw new Error("setFlashMode not supported under the web platform")})()}flip(){return(0,a.A)(function*(){throw new Error("flip not supported under the web platform")})()}setOpacity(e){return(0,a.A)(function*(){const i=document.getElementById("video");i&&e.opacity&&i.style.setProperty("opacity",e.opacity.toString())})()}}}}]);